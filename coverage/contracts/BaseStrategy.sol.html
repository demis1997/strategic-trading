<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for contracts/BaseStrategy.sol</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">all files</a> / <a href="index.html">contracts/</a> BaseStrategy.sol
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>0/43</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/42</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>0/19</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>0/53</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">// SPDX-License-Identifier: MIT
pragma solidity 0.8.24;
&nbsp;
import {AccessControlUpgradeable} from "@openzeppelin/contracts-upgradeable/access/AccessControlUpgradeable.sol";
import {ReentrancyGuardUpgradeable} from "@openzeppelin/contracts-upgradeable/utils/ReentrancyGuardUpgradeable.sol";
import {PausableUpgradeable} from "@openzeppelin/contracts-upgradeable/utils/PausableUpgradeable.sol";
import {AggregatorV3Interface} from "@chainlink/contracts/src/v0.8/shared/interfaces/AggregatorV3Interface.sol";
&nbsp;
import {IBaseStrategy} from "./interfaces/IBaseStrategy.sol";
import {IAdapter} from "./interfaces/IAdapter.sol";
&nbsp;
// import {console} from "hardhat/console.sol";
&nbsp;
/// @title Abstract Base Strategy Contract
/// @notice Provides a base implementation strategy management, including administrative functions and access control
abstract contract BaseStrategy is
    AccessControlUpgradeable,
    ReentrancyGuardUpgradeable,
    PausableUpgradeable,
    IBaseStrategy
{
    /// @notice Role identifier for managing vault operations
    bytes32 public constant VAULT_MANAGER_ROLE = keccak256("VAULT_MANAGER_ROLE");
&nbsp;
    /// @notice Revert message used to indicate that a function is not allowed/implemented
    string public constant REVERT_MSG = "Function not allowed";
&nbsp;
    /// @notice Name of the strategy
    string public strategyName;
&nbsp;
    /// @notice Address of the liquid token used in the strategy
    address public liquidTokenAddress;
&nbsp;
    /// @notice Address of the wrapper for the liquidToken
    address public wrappedLiquidTokenAddress;
&nbsp;
    /// @notice Address of the strategy for withdrawals
    address public withdrawStrategyAddress;
&nbsp;
    /// @notice Main vault address associated with this strategy
    address public vaultAddress;
&nbsp;
    /// @notice Total value of assets currently deployed by this strategy
    uint256 public deployedAssetsValue;
&nbsp;
    /// @notice Path of adapters used for deploying assets
    address[] public adaptersDeployPath;
&nbsp;
    /// @notice Path of adapters used for withdrawing assets
    address[] public adaptersWithdrawPath;
&nbsp;
    /// @notice Addresses of the priceFeed per token
    mapping(address token =&gt; address priceFeed) public priceFeedPerToken;
&nbsp;
    /// @notice Accepts only ETH transfers
    receive() external payable {}
&nbsp;
    /// @notice Sets the vault address
    /// @param vaultAddress_ New vault address
<span class="fstat-no" title="function not covered" >    function setVaultAddress(address vaultAddress_) external virtual onlyRole(DEFAULT_ADMIN_ROLE) {</span>
<span class="cstat-no" title="statement not covered" >        _checkZeroAddress(vaultAddress_, "vaultAddress_")</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        emit VaultAddressSet(vaultAddress_);</span>
&nbsp;
        vaultAddress = vaultAddress_;
    }
&nbsp;
    /// @notice Sets the address for the withdrawal strategy
    /// @param withdrawStrategyAddress_ New address for the withdrawal strategy
<span class="fstat-no" title="function not covered" >    function setWithdrawStrategyAddress(</span>
        address withdrawStrategyAddress_
    ) external virtual onlyRole(DEFAULT_ADMIN_ROLE) {
<span class="cstat-no" title="statement not covered" >        _checkZeroAddress(withdrawStrategyAddress_, "withdrawStrategyAddress_")</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        emit WithdrawStrategyAddressSet(withdrawStrategyAddress_);</span>
&nbsp;
        withdrawStrategyAddress = withdrawStrategyAddress_;
    }
&nbsp;
    /// @notice Sets the strategy name
    /// @param strategyName_ New name of the strategy
<span class="fstat-no" title="function not covered" >    function setStrategyName(</span>
        string calldata strategyName_
    ) external virtual onlyRole(DEFAULT_ADMIN_ROLE) {
<span class="cstat-no" title="statement not covered" >        _checkEmptyString(strategyName_, "strategyName_")</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        emit StrategyNameSet(strategyName_);</span>
&nbsp;
        strategyName = strategyName_;
    }
&nbsp;
    /// @notice Set the feed address to get price for a specific token
    /// @param token_ Token to get the price
    /// @param feed_ Feed address
<span class="fstat-no" title="function not covered" >    function setPriceFeedPerToken(</span>
        address token_,
        address feed_
    ) external onlyRole(DEFAULT_ADMIN_ROLE) {
<span class="cstat-no" title="statement not covered" >        require(</span>
            (token_ == liquidTokenAddress || token_ == wrappedLiquidTokenAddress) &amp;&amp;
                token_ != address(0),
            "Invalid token entered"
        );
&nbsp;
<span class="cstat-no" title="statement not covered" >        emit PriceFeedSet(token_, feed_);</span>
&nbsp;
        priceFeedPerToken[token_] = feed_;
    }
&nbsp;
    /// @notice Replaces the entire deployment path for adapters with new addresses
    /// @param adaptersDeployPath_ Array of new adapter addresses for deployment
<span class="fstat-no" title="function not covered" >    function _setAdaptersDeployPath(</span>
        address[] memory adaptersDeployPath_,
        uint8 deploymentAdaptersQty_
    ) internal {
<span class="cstat-no" title="statement not covered" >        uint256 length = adaptersDeployPath_.length;</span>
        // check deployment path qty is correct
<span class="cstat-no" title="statement not covered" >        if (length != deploymentAdaptersQty_) revert InvalidAdaptersPath({target: "deploy"});</span>
&nbsp;
        // Clear the existing array
        delete adaptersDeployPath;
&nbsp;
<span class="cstat-no" title="statement not covered" >        emit AdaptersDeployPathSet(adaptersDeployPath_);</span>
&nbsp;
        // Replace with the new addresses
<span class="cstat-no" title="statement not covered" >        for (uint i = 0; i &lt; length; i++) {</span>
<span class="cstat-no" title="statement not covered" >            _checkZeroAddress(adaptersDeployPath_[i], "adaptersDeployPath_[]")</span>;
<span class="cstat-no" title="statement not covered" >            adaptersDeployPath.push(adaptersDeployPath_[i])</span>;
        }
    }
&nbsp;
    /// @notice Replaces the entire withdrawal path for adapters with new addresses
    /// @param adaptersWithdrawPath_ Array of new adapter addresses for withdrawal
<span class="fstat-no" title="function not covered" >    function _setAdaptersWithdrawPath(</span>
        address[] memory adaptersWithdrawPath_,
        uint8 withdrawAdaptersQty_
    ) internal {
<span class="cstat-no" title="statement not covered" >        uint256 length = adaptersWithdrawPath_.length;</span>
        // check withdraw path qty is correct
<span class="cstat-no" title="statement not covered" >        if (length != withdrawAdaptersQty_) revert InvalidAdaptersPath({target: "withdraw"});</span>
&nbsp;
        // Clear the existing array
        delete adaptersWithdrawPath;
&nbsp;
<span class="cstat-no" title="statement not covered" >        emit AdaptersWithdrawPathSet(adaptersWithdrawPath_);</span>
&nbsp;
        // Replace with the new addresses
<span class="cstat-no" title="statement not covered" >        for (uint i = 0; i &lt; length; i++) {</span>
<span class="cstat-no" title="statement not covered" >            _checkZeroAddress(adaptersWithdrawPath_[i], "adaptersWithdrawPath_[]")</span>;
<span class="cstat-no" title="statement not covered" >            adaptersWithdrawPath.push(adaptersWithdrawPath_[i])</span>;
        }
    }
&nbsp;
    /// @notice Sets a new liquid token address for the strategy
    /// @param liquidTokenAddress_ New liquid token address
<span class="fstat-no" title="function not covered" >    function setLiquidTokenAddress(</span>
        address liquidTokenAddress_
    ) external onlyRole(DEFAULT_ADMIN_ROLE) {
<span class="cstat-no" title="statement not covered" >        _checkZeroAddress(liquidTokenAddress_, "liquidTokenAddress_")</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        emit LiquidTokenSet(liquidTokenAddress_);</span>
&nbsp;
        liquidTokenAddress = liquidTokenAddress_;
    }
&nbsp;
    /// @notice Sets a new address for the wrapper of liquid token
    /// @param wrappedLiquidTokenAddress_ New wrapper address
<span class="fstat-no" title="function not covered" >    function setWrappedLiquidTokenAddress(</span>
        address wrappedLiquidTokenAddress_
    ) external onlyRole(DEFAULT_ADMIN_ROLE) {
<span class="cstat-no" title="statement not covered" >        _checkZeroAddress(wrappedLiquidTokenAddress_, "wrappedLiquidTokenAddress_")</span>;
&nbsp;
<span class="cstat-no" title="statement not covered" >        emit TokenWrapperSet(wrappedLiquidTokenAddress_);</span>
&nbsp;
        wrappedLiquidTokenAddress = wrappedLiquidTokenAddress_;
    }
&nbsp;
    /// @notice Deploys assets using the specified adapter
    /// @param adapter_ Address of the adapter used
    /// @param sender_ Address of the asset sender (vault)
    /// @param receiver_ Address of the asset receiver (this contract)
    /// @param token_ Address of the token to be deployed
    /// @param tokenAmount_ Amount of tokens to be deployed
    /// @param wrapToken Boolean indicating whether to wrap the token
    /// @return liquidToken Address of the liquid token received
    /// @return liquidTokenAmount Amount of liquid tokens received
<span class="fstat-no" title="function not covered" >    function _deployAssets(</span>
        address adapter_,
        address sender_, // first one is vault
        address receiver_, // this contract
        address token_,
        uint256 tokenAmount_,
        bool wrapToken
    ) internal returns (address, uint256) {
        // call the function on the adapter
        // after this function
        // assets should be transferred to protocol
        // liquid assets should be transferred from protocol to strategy
<span class="cstat-no" title="statement not covered" >        (address liquidToken, uint256 liquidTokenAmount) = IAdapter(adapter_).deposit(</span>
            sender_, // first one is vault // second one should be this contract
            receiver_, // should be ==&gt; address(this) it is this address comming from the vault
            token_,
            tokenAmount_,
            wrapToken
        );
&nbsp;
<span class="cstat-no" title="statement not covered" >        return (liquidToken, liquidTokenAmount);</span>
    }
&nbsp;
    /// @notice Pauses the contract (only callable by admin)
    /// @dev Restricted to admin role
<span class="fstat-no" title="function not covered" >    function pause() external onlyRole(DEFAULT_ADMIN_ROLE) {</span>
<span class="cstat-no" title="statement not covered" >        _pause()</span>;
    }
&nbsp;
    /// @notice Unpauses the contract (only callable by admin)
    /// @dev Restricted to admin role
<span class="fstat-no" title="function not covered" >    function unpause() external onlyRole(DEFAULT_ADMIN_ROLE) {</span>
<span class="cstat-no" title="statement not covered" >        _unpause()</span>;
    }
&nbsp;
    /// @notice Retrieves the price of a token using the withdrawal adapter
    /// @param token_ Address of the token to retrieve the price for
    /// @param source_ Specifies from where to get the price when no oracle is defined
    /// @return The price of the token in ETH
<span class="fstat-no" title="function not covered" >    function getTokenPrice(address token_, uint8 source_) public view returns (uint256) {</span>
<span class="cstat-no" title="statement not covered" >        require(</span>
            token_ == liquidTokenAddress || token_ == wrappedLiquidTokenAddress,
            "Invalid token requested"
        );
<span class="cstat-no" title="statement not covered" >        require(source_ == 1 || source_ == 2, "Invalid source to get price")</span>;
&nbsp;
        // get oracle if any
<span class="cstat-no" title="statement not covered" >        address priceFeed = priceFeedPerToken[token_];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        uint256 priceInWETH;</span>
<span class="cstat-no" title="statement not covered" >        if (priceFeed != address(0)) {</span>
            // get price from oracle
<span class="cstat-no" title="statement not covered" >            (, int answer, , , ) = AggregatorV3Interface(priceFeed).latestRoundData();</span>
            priceInWETH = uint256(answer);
        } else {
            // get adapter to get the price from
<span class="cstat-no" title="statement not covered" >            address adapter = source_ == 2 ? _getAdapterForWithdraw() : _getLastDepositAdapter();</span>
            // get price from pool
            priceInWETH = IAdapter(adapter).getTokenPrice(token_);
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        return priceInWETH;</span>
    }
&nbsp;
    /// @notice Returns the first deployment adapter address
    /// @return address of the first deployment adapter
<span class="fstat-no" title="function not covered" >    function _getFirstDepositAdapter() internal view returns (address) {</span>
<span class="cstat-no" title="statement not covered" >        return adaptersDeployPath[0];</span>
    }
&nbsp;
    /// @notice Returns the last deployment adapter address for valuation purposes
    /// @return address of the last deployment adapter
<span class="fstat-no" title="function not covered" >    function _getLastDepositAdapter() internal view returns (address) {</span>
        /// @notice in this strategy, index 0 is the only one
<span class="cstat-no" title="statement not covered" >        return adaptersDeployPath[adaptersDeployPath.length - 1];</span>
    }
&nbsp;
    /// @notice Returns the first withdrawal adapter address
    /// @return address of the first withdrawal adapter
<span class="fstat-no" title="function not covered" >    function _getAdapterForWithdraw() internal view returns (address) {</span>
        /// @notice in this strategy, index 0 is the only one
<span class="cstat-no" title="statement not covered" >        return adaptersWithdrawPath[0];</span>
    }
&nbsp;
    /// @notice Returns the current value of deployed assets
    /// @return uint256 The current value of assets deployed by the strategy
<span class="fstat-no" title="function not covered" >    function _getDeployedAssetsValue() internal view returns (uint256) {</span>
<span class="cstat-no" title="statement not covered" >        return deployedAssetsValue;</span>
    }
&nbsp;
    /// @dev Internal function to check for zero addresses and revert if necessary.
<span class="fstat-no" title="function not covered" >    function _checkZeroAddress(address variable_, string memory target_) internal pure {</span>
<span class="cstat-no" title="statement not covered" >        if (variable_ == address(0)) revert ZeroAddress({target: target_});</span>
    }
&nbsp;
    /// @dev Internal function to check for empty strings and revert if necessary.
<span class="fstat-no" title="function not covered" >    function _checkEmptyString(string memory variable_, string memory target_) internal pure {</span>
<span class="cstat-no" title="statement not covered" >        if (!(bytes(variable_).length &gt; 0)) revert EmptyString({target: target_});</span>
    }
&nbsp;
    /// @dev Internal function to check for zero amounts and revert if necessary.
<span class="fstat-no" title="function not covered" >    function _checkZeroAmount(uint256 variable_, string memory target_) internal pure {</span>
<span class="cstat-no" title="statement not covered" >        if (variable_ == 0) revert ZeroAmount({target: target_});</span>
    }
}
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Mon Aug 05 2024 13:25:43 GMT+0300 (Eastern European Summer Time)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
